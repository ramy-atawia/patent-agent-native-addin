{
  "session_id": "e2e_trace_20250827_164153",
  "timestamp": "2025-08-27T16:41:53.986518",
  "flow_phases": [
    {
      "phase": "frontend_initiation",
      "timestamp": "2025-08-27T16:41:53.986946",
      "description": "User submits message in Word Add-in",
      "data": {
        "user_message": "I want to draft patent claims for a wireless communication system",
        "document_content": "This invention relates to optimizing handover in wireless communication systems...",
        "conversation_history_length": 2
      }
    },
    {
      "phase": "frontend_request_formation",
      "timestamp": "2025-08-27T16:41:53.987075",
      "description": "Frontend forms ChatRequest object",
      "data": {
        "request_object": {
          "user_message": "I want to draft patent claims for a wireless communication system",
          "conversation_history": [
            {
              "role": "user",
              "content": "Hello, I need help with patent drafting"
            },
            {
              "role": "assistant",
              "content": "I'd be happy to help you with patent drafting. What would you like to work on?"
            }
          ],
          "document_content": {
            "text": "This invention relates to optimizing handover in wireless communication systems..."
          },
          "session_id": "frontend_session_1756327313"
        }
      }
    },
    {
      "phase": "backend_api_reception",
      "timestamp": "2025-08-27T16:41:53.987138",
      "description": "Backend receives POST /api/patent/run",
      "data": {
        "endpoint": "/api/patent/run",
        "request_data": {
          "user_message": "I want to draft patent claims for a wireless communication system",
          "conversation_history": [
            {
              "role": "user",
              "content": "Hello, I need help with patent drafting"
            },
            {
              "role": "assistant",
              "content": "I'd be happy to help you with patent drafting. What would you like to work on?"
            }
          ],
          "document_content": {
            "text": "This invention relates to optimizing handover in wireless communication systems..."
          },
          "session_id": "frontend_session_1756327313"
        }
      }
    },
    {
      "phase": "session_creation",
      "timestamp": "2025-08-27T16:41:53.987302",
      "description": "Session manager creates run",
      "data": {
        "session_id": "frontend_session_1756327313",
        "run_id": "run_1756327313",
        "duration_seconds": 9.012222290039062e-05
      }
    },
    {
      "phase": "streaming_initiation",
      "timestamp": "2025-08-27T16:41:53.987345",
      "description": "Frontend makes GET /api/patent/stream",
      "data": {
        "endpoint": "/api/patent/stream",
        "run_id": "run_1756327313",
        "user_input": "I want to draft patent claims for a wireless communication system",
        "context": "patent_streaming"
      }
    },
    {
      "phase": "orchestrator_processing",
      "timestamp": "2025-08-27T16:41:53.987488",
      "description": "Orchestrator.handle() method called",
      "data": {
        "user_input": "I want to draft patent claims for a wireless communication system",
        "context": "patent_streaming",
        "session_id": "frontend_session_1756327313",
        "parameters": {
          "domain": "patent",
          "workflow_type": "patent_streaming",
          "session_id": "frontend_session_1756327313",
          "conversation_history": [
            {
              "role": "user",
              "content": "Hello, I need help with patent drafting"
            },
            {
              "role": "assistant",
              "content": "I'd be happy to help you with patent drafting. What would you like to work on?"
            }
          ],
          "document_content": {
            "text": "This invention relates to optimizing handover in wireless communication systems..."
          }
        }
      }
    },
    {
      "phase": "conversation_memory_update",
      "timestamp": "2025-08-27T16:41:53.987541",
      "description": "Update conversation memory",
      "data": {
        "session_id": "frontend_session_1756327313",
        "input_length": 65
      }
    },
    {
      "phase": "intent_analysis_start",
      "timestamp": "2025-08-27T16:41:53.987599",
      "description": "Analyzing user intent...",
      "data": {
        "thought_type": "intent_analysis"
      }
    },
    {
      "phase": "intent_classification_complete",
      "timestamp": "2025-08-27T16:41:53.987675",
      "description": "Intent classified as: content_drafting (confidence: 0.95)",
      "data": {
        "intent_type": "content_drafting",
        "confidence": 0.95
      }
    },
    {
      "phase": "tool_routing",
      "timestamp": "2025-08-27T16:41:53.987719",
      "description": "Routing to ContentDraftingTool",
      "data": {
        "intent_type": "content_drafting",
        "tool_name": "ContentDraftingTool"
      }
    },
    {
      "phase": "orchestrator_completion",
      "timestamp": "2025-08-27T16:41:53.987894",
      "description": "Orchestrator processing completed",
      "data": {
        "total_duration_seconds": 0.0004069805145263672
      }
    },
    {
      "phase": "frontend_reception",
      "timestamp": "2025-08-27T16:41:53.987924",
      "description": "Frontend receives streaming events",
      "data": {
        "session_id": "frontend_session_1756327313",
        "event_count": 5
      }
    },
    {
      "phase": "event_processing",
      "timestamp": "2025-08-27T16:41:53.988012",
      "description": "Processing event 1: thoughts",
      "data": {
        "event_number": 1,
        "event_type": "thoughts",
        "event_data": {
          "event": "thoughts",
          "content": "Processing request: I want to draft patent claims for a wireless communication system...",
          "thought_type": "initialization",
          "metadata": {
            "session_id": "frontend_session_1756327313",
            "input_length": 65
          },
          "timestamp": "2025-08-27T16:41:53.987573"
        }
      }
    },
    {
      "phase": "event_processing",
      "timestamp": "2025-08-27T16:41:53.988257",
      "description": "Processing event 2: thoughts",
      "data": {
        "event_number": 2,
        "event_type": "thoughts",
        "event_data": {
          "event": "thoughts",
          "content": "Analyzing user intent...",
          "thought_type": "intent_analysis",
          "metadata": {},
          "timestamp": "2025-08-27T16:41:53.987620"
        }
      }
    },
    {
      "phase": "event_processing",
      "timestamp": "2025-08-27T16:41:53.988344",
      "description": "Processing event 3: thoughts",
      "data": {
        "event_number": 3,
        "event_type": "thoughts",
        "event_data": {
          "event": "thoughts",
          "content": "Routing to ContentDraftingTool...",
          "thought_type": "routing",
          "metadata": {
            "intent": "content_drafting",
            "confidence": 0.95
          },
          "timestamp": "2025-08-27T16:41:53.987699"
        }
      }
    },
    {
      "phase": "event_processing",
      "timestamp": "2025-08-27T16:41:53.988449",
      "description": "Processing event 4: thoughts",
      "data": {
        "event_number": 4,
        "event_type": "thoughts",
        "event_data": {
          "event": "thoughts",
          "content": "Executing ContentDraftingTool...",
          "thought_type": "tool_execution",
          "metadata": {
            "tool": "ContentDraftingTool"
          },
          "timestamp": "2025-08-27T16:41:53.987738"
        }
      }
    },
    {
      "phase": "event_processing",
      "timestamp": "2025-08-27T16:41:53.988523",
      "description": "Processing event 5: results",
      "data": {
        "event_number": 5,
        "event_type": "results",
        "event_data": {
          "event": "results",
          "response": "Successfully processed request using ContentDraftingTool",
          "metadata": {
            "tool": "ContentDraftingTool",
            "intent": "content_drafting"
          },
          "data": {
            "content": [
              {
                "content_number": "1",
                "content_text": "Generated content based on: I want to draft patent claims for a wireless commu...",
                "content_type": "primary",
                "dependency": null,
                "focus_area": "general"
              }
            ],
            "reasoning": "Content drafted based on user input: I want to draft patent claims for a wireless communication system",
            "metadata": {
              "input_length": 65,
              "outputs_generated": 1
            }
          },
          "timestamp": "2025-08-27T16:41:53.987861"
        }
      }
    },
    {
      "phase": "frontend_completion",
      "timestamp": "2025-08-27T16:41:53.988606",
      "description": "Frontend processing completed",
      "data": {
        "total_events_processed": 5
      }
    }
  ],
  "api_calls": [
    {
      "timestamp": "2025-08-27T16:41:53.987237",
      "method": "POST",
      "endpoint": "/api/patent/run",
      "request": {
        "user_message": "I want to draft patent claims for a wireless communication system",
        "conversation_history": [
          {
            "role": "user",
            "content": "Hello, I need help with patent drafting"
          },
          {
            "role": "assistant",
            "content": "I'd be happy to help you with patent drafting. What would you like to work on?"
          }
        ],
        "document_content": {
          "text": "This invention relates to optimizing handover in wireless communication systems..."
        },
        "session_id": "frontend_session_1756327313"
      },
      "response": {
        "run_id": "run_1756327313",
        "session_id": "frontend_session_1756327313"
      }
    }
  ],
  "llm_calls": [
    {
      "timestamp": "2025-08-27T16:41:53.987644",
      "purpose": "intent_classification",
      "input": {
        "user_input": "I want to draft patent claims for a wireless communication system",
        "context": "patent_streaming"
      },
      "output": {
        "intent_type": "content_drafting",
        "confidence": 0.95
      },
      "duration_seconds": 2.6226043701171875e-06
    }
  ],
  "tool_executions": [
    {
      "timestamp": "2025-08-27T16:41:53.987763",
      "tool": "ContentDraftingTool",
      "input": {
        "user_input": "I want to draft patent claims for a wireless communication system",
        "context": "patent_streaming",
        "parameters": {
          "domain": "patent",
          "workflow_type": "patent_streaming",
          "session_id": "frontend_session_1756327313",
          "conversation_history": [
            {
              "role": "user",
              "content": "Hello, I need help with patent drafting"
            },
            {
              "role": "assistant",
              "content": "I'd be happy to help you with patent drafting. What would you like to work on?"
            }
          ],
          "document_content": {
            "text": "This invention relates to optimizing handover in wireless communication systems..."
          }
        }
      },
      "output": {
        "content": [
          {
            "content_number": "1",
            "content_text": "Generated content based on: I want to draft patent claims for a wireless commu...",
            "content_type": "primary",
            "dependency": null,
            "focus_area": "general"
          }
        ],
        "reasoning": "Content drafted based on user input: I want to draft patent claims for a wireless communication system",
        "metadata": {
          "input_length": 65,
          "outputs_generated": 1
        }
      },
      "duration_seconds": 5.0067901611328125e-06
    }
  ],
  "streaming_events": [
    {
      "timestamp": "2025-08-27T16:41:53.987576",
      "event_type": "initialization",
      "event_data": {
        "event": "thoughts",
        "content": "Processing request: I want to draft patent claims for a wireless communication system...",
        "thought_type": "initialization",
        "metadata": {
          "session_id": "frontend_session_1756327313",
          "input_length": 65
        },
        "timestamp": "2025-08-27T16:41:53.987573"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.987622",
      "event_type": "intent_analysis",
      "event_data": {
        "event": "thoughts",
        "content": "Analyzing user intent...",
        "thought_type": "intent_analysis",
        "metadata": {},
        "timestamp": "2025-08-27T16:41:53.987620"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.987700",
      "event_type": "routing",
      "event_data": {
        "event": "thoughts",
        "content": "Routing to ContentDraftingTool...",
        "thought_type": "routing",
        "metadata": {
          "intent": "content_drafting",
          "confidence": 0.95
        },
        "timestamp": "2025-08-27T16:41:53.987699"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.987739",
      "event_type": "tool_execution",
      "event_data": {
        "event": "thoughts",
        "content": "Executing ContentDraftingTool...",
        "thought_type": "tool_execution",
        "metadata": {
          "tool": "ContentDraftingTool"
        },
        "timestamp": "2025-08-27T16:41:53.987738"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.987865",
      "event_type": "results",
      "event_data": {
        "event": "results",
        "response": "Successfully processed request using ContentDraftingTool",
        "metadata": {
          "tool": "ContentDraftingTool",
          "intent": "content_drafting"
        },
        "data": {
          "content": [
            {
              "content_number": "1",
              "content_text": "Generated content based on: I want to draft patent claims for a wireless commu...",
              "content_type": "primary",
              "dependency": null,
              "focus_area": "general"
            }
          ],
          "reasoning": "Content drafted based on user input: I want to draft patent claims for a wireless communication system",
          "metadata": {
            "input_length": 65,
            "outputs_generated": 1
          }
        },
        "timestamp": "2025-08-27T16:41:53.987861"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.988129",
      "event_type": "thought_unknown",
      "event_data": {
        "event": "thoughts",
        "content": "Processing request: I want to draft patent claims for a wireless communication system...",
        "thought_type": "initialization",
        "metadata": {
          "session_id": "frontend_session_1756327313",
          "input_length": 65
        },
        "timestamp": "2025-08-27T16:41:53.987573"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.988308",
      "event_type": "thought_unknown",
      "event_data": {
        "event": "thoughts",
        "content": "Analyzing user intent...",
        "thought_type": "intent_analysis",
        "metadata": {},
        "timestamp": "2025-08-27T16:41:53.987620"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.988397",
      "event_type": "thought_unknown",
      "event_data": {
        "event": "thoughts",
        "content": "Routing to ContentDraftingTool...",
        "thought_type": "routing",
        "metadata": {
          "intent": "content_drafting",
          "confidence": 0.95
        },
        "timestamp": "2025-08-27T16:41:53.987699"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.988489",
      "event_type": "thought_unknown",
      "event_data": {
        "event": "thoughts",
        "content": "Executing ContentDraftingTool...",
        "thought_type": "tool_execution",
        "metadata": {
          "tool": "ContentDraftingTool"
        },
        "timestamp": "2025-08-27T16:41:53.987738"
      }
    },
    {
      "timestamp": "2025-08-27T16:41:53.988580",
      "event_type": "results_processing",
      "event_data": {
        "event": "results",
        "response": "Successfully processed request using ContentDraftingTool",
        "metadata": {
          "tool": "ContentDraftingTool",
          "intent": "content_drafting"
        },
        "data": {
          "content": [
            {
              "content_number": "1",
              "content_text": "Generated content based on: I want to draft patent claims for a wireless commu...",
              "content_type": "primary",
              "dependency": null,
              "focus_area": "general"
            }
          ],
          "reasoning": "Content drafted based on user input: I want to draft patent claims for a wireless communication system",
          "metadata": {
            "input_length": 65,
            "outputs_generated": 1
          }
        },
        "timestamp": "2025-08-27T16:41:53.987861"
      }
    }
  ],
  "performance_metrics": {
    "total_events_processed": 5,
    "total_api_calls": 1,
    "total_llm_calls": 1,
    "total_tool_executions": 1,
    "success_rate": 100.0
  },
  "error_logs": [],
  "success_indicators": [
    {
      "timestamp": "2025-08-27T16:41:53.988638",
      "indicator": "e2e_trace_completed",
      "details": "All phases completed successfully"
    }
  ]
}